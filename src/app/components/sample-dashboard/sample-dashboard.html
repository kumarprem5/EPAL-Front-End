
<app-sample-header></app-sample-header>

<div class="dashboard">
  <div class="dashboard-header">
   
    
  </div>

  <!-- Stats Card -->
  <div class="stats-container">
    <div class="stat-card">
      <div class="stat-number">{{ samples.length }}</div>
      <div class="stat-label">Samples Today</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">{{ totalElements }}</div>
      <div class="stat-label">Total Samples</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">{{ getQualityCheckedCount() }}</div>
      <div class="stat-label">Approved</div>
    </div>
  </div>
<div class="action-bar">
  <button class="btn-register" (click)="registerNewSample()">
    <span class="btn-icon">+</span>
    Register New Sample
  </button>
</div>

<!-- 
  Loading Skeleton -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading samples...</p>
  </div>

  <!-- Table Section -->
  <div *ngIf="!loading && samples.length > 0" class="table-section">
    <div class="table-wrapper">
      <table class="samples-table">
        <thead>
          <tr>
            <th class="col-id">ID</th>
            <th class="col-report">Report No</th>
            <th class="col-name">Sample Name</th>
            <th class="col-date">Date Created</th>
            <th class="col-project">Project Name</th>
             <th class="col-tech">Technician Checked</th>
            <th class="col-quality">Quality Checked</th>
            <th class="col-action">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let sample of samples; let i = index" [class.checked]="sample.qualityChecked">
            <td class="col-id">{{ i + 1 }}</td>
            <td class="col-report"><strong>{{ sample.reportNumber }}</strong></td>
            <td class="col-name">{{ sample.sampleDescription }}</td>
            <td class="col-date">{{ sample.createdAt | date: 'short' }}</td>
            <td class="col-project">{{ sample.projectName || '-' }}</td>
            <td class="col-tech">
              <span [class.badge-checked]="sample.techanicianChecked" [class.badge-pending]="!sample.techanicianChecked" class="badge">
                {{ sample.techanicianChecked ? '‚úì Checked' : '‚è≥ Pending' }}
              </span>
            </td>
            <td class="col-quality">
              <span [class.badge-checked]="sample.qualityChecked" [class.badge-pending]="!sample.qualityChecked" class="badge">
                {{ sample.qualityChecked ? '‚úì Checked' : '‚è≥ Pending' }}
              </span>
            </td>
            
           <td class="col-action">
  <button 
    class="btn-action btn-view"
    title="View Sample"
    (click)="viewSample(sample)">
    üëÅÔ∏è
  </button>

 <button 
  class="btn-action btn-edit"
  title="Edit Sample"
  [disabled]="sample.qualityChecked"
  (click)="editSample(sample)">
  ‚úèÔ∏è
</button>
</td>
</tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="pagination-container" *ngIf="totalPages > 1">
      <button 
        class="btn-pag" 
        [disabled]="currentPage === 0"
        (click)="onPageChange(currentPage - 1)">
        ‚Üê Previous
      </button>
      <div class="page-info">
        Page {{ currentPage + 1 }} of {{ totalPages }}
      </div>
      <button 
        class="btn-pag" 
        [disabled]="currentPage === totalPages - 1"
        (click)="onPageChange(currentPage + 1)">
        Next ‚Üí
      </button>
    </div>
  </div>
  <!-- Empty State -->
  <div *ngIf="!loading && samples.length === 0" class="empty-state">
    <div class="empty-icon">üìã</div>
    <h3>No Samples Found</h3>
    <p>No samples found for the selected date range.</p>
    <button class="btn-register" (click)="registerNewSample()">
      <span class="btn-icon">+</span>
      Register Your First Sample
    </button>
  </div>
</div>