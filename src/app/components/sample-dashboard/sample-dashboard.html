<app-sample-header></app-sample-header>

<main class="main-content">
  <!-- Action Bar -->
  <div class="action-bar">
    <h2>Dashboard Overview</h2>
    <button class="btn-add-sample" (click)="addNewSample()">
      <span>â•</span>
      Add New Sample
    </button>
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="loading-container" style="text-align: center; padding: 2rem;">
    <div class="loading-spinner" style="margin: 0 auto;">Loading dashboard data...</div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card" *ngFor="let stat of stats">
      <div class="stat-icon" [ngClass]="stat.iconClass">{{ stat.icon }}</div>
      <div class="stat-info">
        <h3>{{ stat.title }}</h3>
        <div class="stat-value">{{ stat.value | number }}</div>
      </div>
    </div>
  </div>

  <!-- Recent Samples -->
  <section class="section" id="recent-samples">
    <div class="section-header">
      <h2 class="section-title">
        <span>ğŸ•’</span>
        Recent Samples
      </h2>
      <a class="view-all" (click)="goToAllSamples()">
  View All â†’
</a>
    </div>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Sample ID</th>
            <th>Sample Type</th>
            <th>Collection Date</th>
            <th>Collector</th>
            <th>Location</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="recentSamples.length === 0 && !isLoading">
            <td colspan="6" style="text-align: center; padding: 2rem; color: #666;">
              No samples found. Add your first sample to get started!
            </td>
          </tr>
          <tr *ngFor="let sample of recentSamples">
            <td>{{ sample.id }}</td>
            <td>{{ sample.type }}</td>
            <td>{{ sample.collectionDate }}</td>
            <td>{{ sample.collector }}</td>
            <td [title]="sample.location" style="cursor: help;">
              {{ sample.location }}
            </td>
            <td>
              <span [ngClass]="getStatusClass(sample.status)">
                {{ getStatusText(sample.status) }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Sample Library -->
  <section class="section" id="sample-library">
    <div class="section-header">
      <h2 class="section-title">
        <span>ğŸ“š</span>
        Sample Library
      </h2>
      <a class="view-all" (click)="goToAllSamples()">
  View All â†’
</a>
    </div>
    <div class="sample-grid">
      <div *ngIf="librarySamples.length === 0 && !isLoading" 
           style="grid-column: 1/-1; text-align: center; padding: 2rem; color: #666;">
        No samples in library yet.
      </div>
      <div class="sample-card" *ngFor="let sample of librarySamples">
        <div class="sample-card-header">
          <div style="flex: 1; min-width: 0;">
            <div class="sample-id" [title]="sample.id">{{ sample.id }}</div>
            <div class="sample-type" [title]="sample.type">{{ sample.type }}</div>
          </div>
          <span [ngClass]="getStatusClass(sample.status)" style="flex-shrink: 0;">
            {{ sample.status === 'analysis' ? 'Analysis' : sample.status === 'approved' ? 'Approved' : 'Pending' }}
          </span>
        </div>
        <div class="sample-details">
          <div [title]="'Location: ' + sample.location">
            ğŸ“ Location: {{ sample.location }}
          </div>
          <div>ğŸ‘¤ Collector: {{ sample.collector }}</div>
          <div>ğŸ“… Date: {{ sample.collectionDate }}</div>
          <div *ngIf="sample.tests" [title]="'Tests: ' + sample.tests">
            ğŸ§ª Tests: {{ sample.tests }}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Reports Section -->
  <section class="section" id="reports">
    <div class="section-header">
      <h2 class="section-title">
        <span>ğŸ“„</span>
        Recent Reports
      </h2>
      <a href="#" class="view-all">Generate New Report â†’</a>
    </div>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Report ID</th>
            <th>Report Type</th>
            <th>Generated Date</th>
            <th>Period</th>
            <th>Download</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let report of reports">
            <td>{{ report.id }}</td>
            <td>{{ report.type }}</td>
            <td>{{ report.generatedDate }}</td>
            <td>{{ report.period }}</td>
            <td>
              <a href="#" class="download-link">ğŸ“¥ Download</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
</main>